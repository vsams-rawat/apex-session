<template>
    <template if:true={first}>
        <div class="slds-card">
            <lightning-card title="OBJECT SELECTION" class="slds-m-around_medium">
                <lightning-combobox name="SObject"
                                    value={objName}
                                    placeholder="Select Object"
                                    options={options}
                                    onchange={handleChanges}>
                </lightning-combobox>
                <p>Selected Object is : {objName}</p>
            </lightning-card>
        </div>
        <lightning-button label="Next Page" onclick={secondPage}></lightning-button>
    </template>
    <template if:true={second}>
        <lightning-card class="slds-m-around_medium">
            <lightning-dual-listbox
                    name="languages"
                    label="Select Fields"
                    source-label="Available Fields"
                    selected-label="Selected Fields"
                    field-level-help="Select Fields"
                    options={optionsFields}
                    onchange={handleChange}>
            </lightning-dual-listbox>
                <div style="overflow-wrap: break-word;">
                    <p>Selected Fields are: {selectedFields}</p>
                </div>
                <div>
                    <button class="slds-button slds-button_brand slds-m-around_medium" onclick={showForm}>Open Form</button>
                </div>
        </lightning-card>
    </template>
    <template if:true={formView}>
        <lightning-card class="slds-m-around_medium">
            <lightning-record-form
            object-api-name={objName}
            fields={selectedFields}
            onsubmit={handleSubmit}>
        </lightning-record-form>
        </lightning-card>
    </template>

    <template if:true={recordArray}>
        <div class="slds-card">
            <lightning-card title={objName}>
                <div class="btns" style="margin-bottom: 20px;">
                    <button class="slds-button slds-button_neutral" onclick={importRows}>Import Selected Rows</button>
                </div>
                <!--      Data Table     -->
                <div style="height: 500px;" class="table">
                    <lightning-datatable
                            key-field="Id"
                            data={recordArray}
                            columns={columns}
                            onrowselection={rowsHandler}>
                    </lightning-datatable>
                </div>
            </lightning-card>
        </div>
    </template>

</template>